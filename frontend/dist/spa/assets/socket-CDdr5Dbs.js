import{b as f,u as r,a as u,d as a,s as e,w as d}from"./index-DPvYfYOs.js";const l=f(()=>{const s=r(),c=u(),o=a();s.$subscribe((t,n)=>{const i=s.user?.status==="Offline";n.token&&!e.isConnected()&&!i&&e.connect(n.token),!n.token&&e.isConnected()&&(o.cleanup(),e.disconnect())}),d(()=>c.currentUser?.status,(t,n)=>{n==="Offline"&&t!=="Offline"&&s.token&&!e.isConnected()&&e.connect(s.token),t==="Offline"&&e.isConnected()&&(o.cleanup(),e.disconnect())}),s.token&&!e.isConnected()&&s.user?.status!=="Offline"&&e.connect(s.token)});export{l as default,e as socketService};
